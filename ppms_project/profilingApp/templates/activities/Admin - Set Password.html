{% load static %}

<title>PPMS | Set Password</title>
</head>
<body>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="{% static '/CSS/styles.css' %}">
    <link rel="stylesheet" href="{% static '/CSS/font-awesome/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static '/CSS/css/bootstrap.min.css' %}">
    <link rel="icon" href="{% static '/Media/logo.svg' %}" type="image/x-icon">
    <script src="{% static '/Javascript/js/jquery.min.js' %}"></script>
    <link rel="icon" href="{% static '/Media/Dasmalogo.png' %}" type="image/y-icon">

    <title>City of Dasmari√±as</title>
    <!-- Header -->
</head>

<body class="mt-0 mb-0 d-flex align-items-stretch" style="background-color: black;">
    <!-- Dashboard -->
    <div id="grid" class="container-fluid mt-0 p-0 d-flex align-items-center justify-content-center" >
        <div class="card flex-wrap" id="profileCard2" >
            <div class="card-header">
            <h5 class="d-flex justify-content-center"><i class="fas fa-clipboard-check mx-2"></i> Set Password</h5>
            </div>
            <form action="" method="POST">
                {% csrf_token %}
            <div class="card-body p-3">
                <div class="md-form justify-content-center d-flex" style="width:100%">
                    <div class="row d-flex justify-content-center align-items-center">
                        <div class=" d-sm-flex d-block justify-content-center gap-2 text-center ">
                            <p>Set new password for </p> 
                            <p class="fw-bold"> {{ user.first_name }} {{ user.last_name }} </p>
                        </div>
                    <hr>    
                        <div class="col md-form p-2  d-sm-flex d-block justify-content-end align-items-center text-center">
                            <label class="mx-2"id="user-lbl" data-error="wrong" data-success="right">New Password: </label>
                            {{ form.new_password1 }}
                            
                        </div>
                        <div class="col md-form p-2  d-sm-flex d-block justify-content-end align-items-center text-center">
                            <label class="mx-2" id="user-lbl" data-error="wrong" data-success="right">Confirm Password: </label>
                            {{ form.new_password2 }}
                        </div>
    
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="d-flex justify-content-end">
                    <a href="{% url 'admin_userAccounts' %}"><button type="button" style="background-color: #EF3A25; color: white;" class="btn">Cancel</button></a>
                    <input class="btn btn-primary px-3" type="submit" name="Confirm" value="Reset" style="margin-left: 1%; background-color: rgb(44, 95, 34);">
                </div>
            </div>
            </form>
        </div>
        </div>
    </div>
</body>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

{% if messages %}
    {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR  %}
            <script>
                Swal.fire({
                    icon: 'error',
                    title: 'Reset password failed.',
                    text: '{{message}}',
                    confirmButtonText: "Ok",
                    confirmButtonColor: '#EF3A25',
                });
            </script>
        {% else %}
            <script>
                Swal.fire({
                    icon: 'success',
                    title: 'Password reset successfully.',
                    text: '{{message}}',
                    confirmButtonText: "Ok",
                    confirmButtonColor: '#EF3A25',
                }).then(function() {
                    window.location = "{% url 'admin_userAccounts' %}";
                });
            </script>
        {% endif %}
    {% endfor %}
{% endif %}
    
